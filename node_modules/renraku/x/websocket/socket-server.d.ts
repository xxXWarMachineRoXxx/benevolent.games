import { Api, ApiRemote, MetaMap, ConnectionControls, Logger, HttpHeaders } from "../types.js";
export declare function webSocketServer({ port, exposeErrors, maxPayloadSize, acceptConnection, logger, }: {
    port: number;
    logger?: Logger;
    exposeErrors: boolean;
    maxPayloadSize: number;
    acceptConnection({}: {
        headers: HttpHeaders;
        controls: ConnectionControls;
        prepareClientApi: <xApi extends Api>(map: MetaMap<xApi>) => ApiRemote<xApi>;
    }): {
        api: Api;
        handleConnectionClosed(): void;
    };
}): {
    close: () => void;
};
