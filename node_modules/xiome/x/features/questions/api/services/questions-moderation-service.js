import * as renraku from "renraku";
import { find } from "../../../../toolbox/dbby/dbby-helpers.js";
import { authenticatedQuestionsPolicy } from "./policies/authenticated-questions-policy.js";
export const makeQuestionsModerationService = (options) => renraku.service()
    .policy(async (meta, headers) => {
    const auth = await authenticatedQuestionsPolicy(options)(meta, headers);
    auth.checker.requirePrivilege("moderate questions");
    auth.checker.requireNotHavePrivilege("banned");
    return auth;
})
    .expose(({ questionsTables }) => ({
    async archiveBoard({ board }) {
        await questionsTables.questionPosts.update({
            ...find({ board }),
            write: { archive: true },
        });
    },
    // TODO implement
    async fetchReportedQuestions() { },
}));
//# sourceMappingURL=questions-moderation-service.js.map